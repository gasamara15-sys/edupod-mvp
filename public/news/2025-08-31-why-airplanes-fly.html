<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[Science Kids] Why Do Airplanes Fly? | EduPod 뉴스</title>
  <meta name="category" content="Science, Education, Aviation" />
  <meta name="description" content="날개 모양, 공기의 흐름, 양력과 추력, 각도와 실속까지 — 아이들이 생활 속 비유로 이해하는 ‘비행기는 왜 하늘을 날까?’" />
  <link rel="icon" href="/favicon.ico" />
  <link rel="canonical" href="https://www.edupod.kr/news/2025-08-31-why-airplanes-fly.html" />
  <style>
    :root{
      --border:#e5e7eb;--muted:#6b7280;--accent:#eef2ff;--active:#fff4cc;
      --primary:#111827;--bg:#fafafa;--cta:#4f46e5;--cta-600:#4338ca;--cta-bg:#eef2ff;
      --note:#0ea5e9;--note-bg:#ecfeff;--warn:#ef4444;--ok:#16a34a;
    }
    html,body{margin:0;padding:0;background:var(--bg)}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;color:var(--primary)}
    header{padding:12px 16px;background:#fff;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:12px}
    h1{font-size:18px;margin:0;flex:1}
    .nav{display:flex;gap:8px}
    .nav a{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:#fff;text-decoration:none;font-size:13px;color:var(--primary)}
    .nav a:hover{background:#f8fafc}
    main{padding:20px;max-width:980px;margin:0 auto}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:16px;flex:1 1 360px;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .meta{font-size:12px;color:var(--muted)}
    .pill{font-size:12px;border:1px solid var(--border);padding:2px 8px;border-radius:999px;background:#fff}
    .headline{font-weight:700}
    .small{font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
    select,button,input[type="range"]{border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:#fff;cursor:pointer}
    button.primary{background:var(--cta-bg);border-color:var(--cta);color:var(--cta)}
    button.primary:hover{background:#e6e9ff;border-color:var(--cta-600);color:var(--cta-600)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .level-tabs{display:flex;gap:8px;margin:8px 0 12px;flex-wrap:wrap}
    .level-tabs button{padding:6px 10px}
    .level-tabs button[aria-selected="true"]{background:#111827;color:#fff;border-color:#111827}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){ .grid{grid-template-columns:1.2fr .8fr} }
    .sent{padding:8px 10px;border-radius:8px;margin:6px 0;border:1px dashed transparent}
    .sent:hover{background:#f8fafc}
    .sent.active{background:var(--active);border-color:#fcd34d}
    .en{display:block}
    .ko{display:block;color:#374151;font-size:13px;margin-top:4px}
    .ko.hidden{display:none !important;}
    .quiz{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .quiz h3{font-size:14px;margin:0 0 6px}
    .footer{font-size:12px;color:var(--muted);margin-top:16px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid var(--border);border-bottom-width:2px;padding:2px 6px;border-radius:6px;background:#fff}
    .grammar{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .iconbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0}
    .icon-btn{
      width:52px;height:52px;display:grid;place-items:center;
      border:2px solid var(--note);border-radius:14px;background:#fff;color:var(--note);
      box-shadow:0 1px 0 rgba(0,0,0,.03)
    }
    .icon-btn:hover{background:var(--note-bg)}
    .icon-btn:disabled{opacity:.5}
    .icon-btn svg{width:26px;height:26px;display:block}
    .icon-label{font-size:12px;color:var(--muted);margin-left:2px}
  </style>
    <!-- Microsoft Clarity -->
<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "svtn5vtbri");
</script>  
</head>
<body>
<header>
  <h1>EduPod 뉴스
    <span class="meta">— 2025-08-31 ·
      <span class="pill">Science</span>
      <span class="pill">Education</span>
      <span class="pill">Aviation</span>
    </span>
  </h1>
  <nav class="nav" aria-label="주요 이동">
    <a href="/" id="homeLink" title="홈으로">홈으로</a>
    <a href="/news.html/" id="newsListLink" title="뉴스 리스트">뉴스 리스트</a>
  </nav>
</header>

<main>
  <div class="row">
    <div class="card" style="flex:1 1 100%">
      <div class="level-tabs" role="tablist">
        <button role="tab" id="tab-low" aria-selected="false">초등 저학년 (A1–A2)</button>
        <button role="tab" id="tab-high" aria-selected="false">초등 고학년 (A2–B1)</button>
        <button role="tab" id="tab-mid" aria-selected="true">중학생 (A2–B1)</button>
        <button role="tab" id="tab-hs" aria-selected="false">고등/수능 (B2–C1)</button>
      </div>

      <!-- 재생 아이콘 버튼 -->
      <div class="iconbar" aria-label="재생 컨트롤">
        <button id="playAll" class="icon-btn" title="전체 재생" aria-label="전체 재생">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="pauseBtn" class="icon-btn" title="일시정지" aria-label="일시정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
        </button>
        <button id="resumeBtn" class="icon-btn" title="재개" aria-label="재개">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="stopBtn" class="icon-btn" title="정지" aria-label="정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 6h12v12H6z"/></svg>
        </button>
        <span class="icon-label">문장 클릭: 해당 문장만 반복</span>
      </div>

      <!-- 보이스/속도 컨트롤 -->
      <div class="controls">
        <label class="small" for="voiceSelect">음성:</label>
        <select id="voiceSelect" aria-label="Voice"></select>
        <span class="small">속도 프리셋:</span>
        <button class="preset" data-rate="0.85">처음 듣기</button>
        <button class="preset" data-rate="1.0">보통</button>
        <button class="preset" data-rate="1.15">빠르게</button>
        <span class="small">세부 속도</span>
        <input id="rate" type="range" min="0.7" max="1.4" step="0.05" value="1.0" />
        <span class="small" id="rateLabel">1.00×</span>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card" id="articleCard">
      <div class="meta"><span class="pill" id="topicPill">Science</span> <span class="pill" id="cefrPill">A2–B1</span></div>
      <div class="headline" id="headline">Why Do Airplanes Fly? The Kid-Friendly Science of Lift ✈️</div>
      <p class="small" id="dek">Wings shape the air, engines push forward, and four forces—lift, weight, thrust, and drag—decide whether planes soar or sink.</p>

      <!-- 한국어 전체 토글 -->
      <div class="controls" id="koToggleControls">
        <button id="toggleAllKoBtn" class="primary">한국어 가리기</button>
        <span class="small">각 레벨 지문의 한국어 해석을 전체 가립니다.</span>
      </div>

      <div id="sentences"></div>
      <div class="footer">문장을 클릭하면 해당 부분만 <span class="kbd">반복</span> 재생합니다. 전체 재생 중 <span class="kbd">일시정지/재개</span> 가능.</div>

      <div class="quiz">
        <h3>퀴즈</h3>
        <ol id="quizList"></ol>
      </div>

      <div class="grammar" id="grammarBox" style="display:none">
        <h3 id="grammarTitle" style="margin:0 0 6px">문법 포인트</h3>
        <ol id="grammarList"></ol>
      </div>
    </div>

    <div class="card">
      <h2 style="margin:0 0 6px">단어장</h2>
      <ul id="vocab"></ul>
      <p class="small">영어 문장 아래에 한국어 해석이 함께 제공됩니다.</p>
    </div>
  </div>
</main>

<script>
/* =========================
   레벨별 콘텐츠 데이터
   ========================= */
const DATA = {
  /* -------- 초등 저학년 (A1–A2) ~12줄 -------- */
  low: {
    topic: "Science",
    cefr: "A1–A2",
    headline: "Why Can a Plane Fly?",
    dek: "Wings and air make lift. Engines push forward.",
    sents: [
      {en:"A plane looks heavy, but it can fly.", ko:"비행기는 무거워 보이지만 하늘을 날 수 있어요."},
      {en:"The secret is in the wings.", ko:"비밀은 날개에 있어요."},
      {en:"Air moves faster over the top and slower under the wing.", ko:"공기는 날개 위로는 빠르게, 아래로는 천천히 흘러요."},
      {en:"This makes lift, a force that pushes up.", ko:"이 차이가 위로 밀어 올리는 힘, 즉 양력을 만들어요."},
      {en:"Engines give thrust to go forward.", ko:"엔진은 앞으로 가는 힘(추력)을 줘요."},
      {en:"When the plane moves fast, more air meets the wing.", ko:"비행기가 빠르게 움직일수록 더 많은 공기가 날개와 만나요."},
      {en:"Four forces act on a plane: lift, weight, thrust, and drag.", ko:"비행기에는 네 가지 힘이 작용해요: 양력, 무게, 추력, 항력."},
      {en:"If lift is bigger than weight, the plane goes up.", ko:"양력이 무게보다 크면 비행기는 올라가요."},
      {en:"If thrust is bigger than drag, the plane speeds up.", ko:"추력이 항력보다 크면 속도가 빨라져요."},
      {en:"Paper airplanes show the same idea.", ko:"종이비행기도 같은 원리를 보여줘요."},
      {en:"Angle matters—too high can make a stall.", ko:"각도도 중요해요—너무 크면 실속이 나요."},
      {en:"Pilots balance all four forces to fly safely.", ko:"조종사는 네 힘을 균형 맞춰 안전하게 날아요."}
    ],
    vocab: [
      ["lift","양력","Lift pushes the plane up."],
      ["thrust","추력","Engines make thrust."],
      ["drag","항력","Drag slows the plane down."]
    ],
    quiz: [
      {q:"Which force pushes a plane up?", options:["Lift","Drag","Friction"], answer:0},
      {tf:true, stmt:"Thrust is the forward push from engines.", answer:true},
      {q:"What happens if the wing angle is too high?", options:["Stall","Turbo","Freeze"], answer:0}
    ]
  },

  /* -------- 초등 고학년 (A2–B1) ~15줄 -------- */
  high: {
    topic: "Education",
    cefr: "A2–B1",
    headline: "Wings Shape Air, Air Lifts Planes",
    dek: "Faster air above, slower air below—plus engine thrust—make flight possible.",
    sents: [
      {en:"Airplanes fly because wings change how air moves.", ko:"비행기는 날개가 공기의 흐름을 바꾸기 때문에 날 수 있어요."},
      {en:"The top surface is curved; the bottom is flatter.", ko:"윗면은 더 둥글고 아랫면은 더 평평하죠."},
      {en:"Air speeds up over the top and slows under the wing.", ko:"공기는 위에서는 빨라지고 아래에서는 느려져요."},
      {en:"The pressure above drops; the pressure below rises.", ko:"위 압력은 낮아지고, 아래 압력은 높아져요."},
      {en:"This pressure difference creates lift.", ko:"이 압력 차이가 양력을 만들어요."},
      {en:"Engines provide thrust to push the plane forward.", ko:"엔진은 추력을 만들어 비행기를 앞으로 밀어요."},
      {en:"Four forces compete: lift vs. weight, thrust vs. drag.", ko:"네 힘이 겨룹니다: 양력 대 무게, 추력 대 항력."},
      {en:"The ‘angle of attack’ helps control lift.", ko:"받음각(공기와 날개의 각도)은 양력을 조절해요."},
      {en:"Too much angle can cause a stall, where lift suddenly drops.", ko:"각도가 지나치면 양력이 급감하는 실속이 나요."},
      {en:"Paper airplanes and car-window hand tests show similar ideas.", ko:"종이비행기나 자동차 창문 밖 손 실험이 비슷한 원리를 보여요."},
      {en:"Jets also use flaps and slats to change wing shape.", ko:"여객기는 플랩·슬랫으로 날개 모양을 바꿔요."},
      {en:"Pilots balance speed and angle during takeoff and landing.", ko:"이착륙 때 조종사는 속도와 각도를 균형 잡아요."},
      {en:"Weather like wind and air density affects performance.", ko:"바람과 공기 밀도 같은 날씨도 성능에 영향을 줘요."},
      {en:"That’s why airplanes prefer long, clear runways.", ko:"그래서 비행기는 길고 깨끗한 활주로를 선호해요."},
      {en:"Flight is science—not magic—but it still feels amazing.", ko:"비행은 마법이 아니라 과학이지만, 여전히 놀라워요."}
    ],
    vocab: [
      ["angle of attack","받음각","Changing the angle changes lift."],
      ["pressure difference","압력 차","Pressure difference creates lift."],
      ["flap / slat","플랩/슬랫","Flaps and slats increase lift at low speeds."]
    ],
    quiz: [
      {q:"Which pair of forces oppose each other?", options:["Lift & Weight","Lift & Thrust","Thrust & Weight"], answer:0},
      {tf:true, stmt:"A stall happens when lift suddenly drops.", answer:true},
      {q:"What device helps at low speeds?", options:["Flaps/Slats","Spoilers only","Headlights"], answer:0}
    ]
  },

  /* -------- 중학생 (A2–B1) 20~22줄 -------- */
  mid: {
    topic: "Aviation",
    cefr: "A2–B1",
    headline: "How Planes Beat Gravity: Lift, Thrust, and Smart Wing Design",
    dek: "Bernoulli + Newton + good control of angle and speed = safe flight.",
    sents: [
      {en:"Planes fly by managing four forces: lift, weight, thrust, and drag.", ko:"비행기는 양력, 무게, 추력, 항력 네 가지 힘을 관리해 날아요."},
      {en:"Wings create lift by shaping airflow above and below.", ko:"날개는 위·아래 공기 흐름을 바꿔 양력을 만듭니다."},
      {en:"Air moves faster over the curved top and slower underneath.", ko:"공기는 둥근 윗면에서는 빠르고 아래에서는 느립니다."},
      {en:"Faster air has lower pressure, so the wing is pushed upward.", ko:"빠른 공기는 압력이 낮아져 날개가 위로 밀립니다."},
      {en:"Engines generate thrust, overcoming drag.", ko:"엔진은 항력을 이기는 추력을 만듭니다."},
      {en:"At takeoff, pilots set a safe angle of attack to build lift.", ko:"이륙 시 조종사는 안전한 받음각을 맞춰 양력을 키웁니다."},
      {en:"Too much angle can separate airflow and cause a stall.", ko:"각도가 과하면 공기가 떨어져 나가 실속이 생깁니다."},
      {en:"Flaps and slats increase wing area and curvature at low speeds.", ko:"플랩·슬랫은 저속에서 면적·굽힘을 키워요."},
      {en:"Spoilers destroy lift on landing to help slow down.", ko:"스포일러는 착륙 때 양력을 줄여 감속을 돕습니다."},
      {en:"Bernoulli’s idea links speed and pressure; Newton reminds us forces come in pairs.", ko:"베르누이는 속도와 압력을, 뉴턴은 힘의 쌍을 알려줍니다."},
      {en:"Propellers and jet turbines both push air backward to move forward.", ko:"프로펠러와 제트 터빈은 공기를 뒤로 밀어 앞으로 나아갑니다."},
      {en:"Air density drops at high altitude, so true airspeed rises for the same lift.", ko:"고도에서는 공기 밀도가 낮아 같은 양력을 위해 실제 속도가 더 필요해요."},
      {en:"Pilots check weight and balance to keep the center of gravity safe.", ko:"조종사는 무게와 균형을 점검해 무게중심을 안전 범위에 둡니다."},
      {en:"Runway length, wind, and temperature change performance numbers.", ko:"활주로 길이, 바람, 기온에 따라 성능 수치가 달라져요."},
      {en:"Paper airplanes test angles; car-window hands test drag and lift feel.", ko:"종이비행기는 각도를, 자동차 창문 손 실험은 항력·양력 느낌을 확인해요."},
      {en:"Gliders prove that engines aren’t required once lift and speed are managed.", ko:"글라이더는 속도와 양력만 관리하면 엔진 없이도 난다는 걸 보여줘요."},
      {en:"Modern jets use computers to keep the plane stable and efficient.", ko:"현대 여객기는 컴퓨터로 안정성과 효율을 높여요."},
      {en:"Pilots train to avoid stalls and manage them if they occur.", ko:"조종사는 실속을 피하고 발생 시 회복하도록 훈련해요."},
      {en:"Flight feels magical—but every step is measured science.", ko:"비행은 마법 같지만 모든 단계가 과학으로 계산됩니다."},
      {en:"That’s why airplanes can safely carry people across oceans.", ko:"그래서 비행기는 사람들을 바다 건너까지 안전하게 실어 나릅니다."}
    ],
    vocab: [
      ["separated airflow","박리(분리)","Separated airflow leads to stall."],
      ["center of gravity","무게중심","Keep the center of gravity in limits."],
      ["true airspeed","실제 대기 속도","Higher altitude needs more true airspeed."]
    ],
    quiz: [
      {q:"Which device increases lift at low speeds?", options:["Flaps/Slats","Spoilers","Air brakes only"], answer:0},
      {tf:true, stmt:"A stall often happens when the angle of attack is too high.", answer:true},
      {q:"Which two laws help explain lift and thrust?", options:["Bernoulli & Newton","Ohm & Hooke","Boyle & Avogadro"], answer:0}
    ],
    grammar: [
      {
        en:"If the angle of attack is too high, the wing may stall.",
        ko:"받음각이 너무 크면 날개가 실속에 빠질 수 있다.",
        point:"조건문: If + 현재, 조동사 + 동사원형",
        q:"If the angle of attack (___) too high, the wing (___) stall.",
        options:["is / may","was / must","were / will have"],
        answer:0
      },
      {
        en:"Lift increases as airflow speeds up over the wing.",
        ko:"날개 위 공기 흐름이 빨라질수록 양력은 증가한다.",
        point:"as + 주어 + 동사 (동시 변화)",
        q:"(___) airflow speeds up, lift increases.",
        options:["As","Because","Unless"],
        answer:0
      }
    ]
  },

  /* -------- 고등/수능 (B2–C1) 28~32줄 -------- */
  hs: {
    topic: "Aviation",
    cefr: "B2–C1",
    headline: "Flight Without Magic: Pressure, Momentum, and the Four-Force Balance",
    dek: "From Bernoulli to Newton, from angle-of-attack to stall recovery: why heavy metal flies.",
    sents: [
      {en:"Airplanes fly by balancing four forces—lift, weight, thrust, and drag—through speed, wing geometry, and precise control.", ko:"비행기는 속도, 날개 형상, 정밀한 제어로 양력·무게·추력·항력 네 힘의 균형을 맞춰 비행합니다."},
      {en:"Lift arises from pressure differences and momentum change in the airflow around the wing.", ko:"양력은 날개 주위 공기의 압력 차와 운동량 변화에서 발생합니다."},
      {en:"A cambered wing speeds the flow over the top, lowering pressure relative to the underside.", ko:"굽은 날개는 윗면 흐름을 가속해 아랫면 대비 압력을 낮춥니다."},
      {en:"Simultaneously, the wing deflects air downward; by Newton’s third law, the air pushes the wing upward.", ko:"동시에 날개는 공기를 아래로 편향시키며, 뉴턴 제3법칙에 따라 공기는 날개를 위로 밀어 올립니다."},
      {en:"Angle of attack controls both pressure distribution and downwash, but excessive angles trigger flow separation.", ko:"받음각은 압력 분포와 다운워시를 좌우하지만, 과도하면 박리를 유발합니다."},
      {en:"Flow separation sharply reduces lift and increases drag: a stall.", ko:"박리는 양력을 급감시키고 항력을 키우는 실속을 일으킵니다."},
      {en:"To delay stall at low speed, pilots deploy high-lift devices—flaps and slats.", ko:"저속에서 실속을 늦추기 위해 플랩·슬랫 같은 고양력 장치를 사용합니다."},
      {en:"Thrust comes from propellers or turbines accelerating mass flow backward.", ko:"추력은 프로펠러나 터빈이 뒤쪽으로 공기 질량 유동을 가속해 만들어냅니다."},
      {en:"At altitude, lower density demands higher true airspeed for the same lift.", ko:"고도에서는 밀도가 낮아 동일 양력을 위해 더 높은 실제 대기 속도가 필요합니다."},
      {en:"Weight and balance ensure the center of gravity remains within certified limits.", ko:"무게와 균형 관리는 인증 한계 내 무게중심을 유지합니다."},
      {en:"Performance depends on runway length, temperature, pressure altitude, and wind.", ko:"성능은 활주로 길이, 기온, 기압고도, 바람에 좌우됩니다."},
      {en:"Fly-by-wire systems stabilize inherently efficient but less naturally stable airframes.", ko:"플라이바이와이어는 고효율이지만 덜 안정적인 기체를 안정화합니다."},
      {en:"During takeoff, pilots rotate to a target pitch that yields safe climb speed.", ko:"이륙 시 조종사는 안전 상승 속도가 나오도록 목표 피치를 설정합니다."},
      {en:"On approach, they manage energy with pitch for speed and power for path—then deploy spoilers and brakes after touchdown.", ko:"착륙 진입에서는 피치로 속도, 파워로 경로를 관리하고, 접지 후 스포일러와 브레이크를 씁니다."},
      {en:"Gliders demonstrate that sustained flight is possible by trading potential and kinetic energy within rising air.", ko:"글라이더는 상승 기류 속에서 위치·운동 에너지를 교환하며 지속 비행이 가능함을 보여줍니다."},
      {en:"Critically, flight safety relies on training: stall recognition, recovery, and upset prevention.", ko:"비행 안전의 핵심은 훈련—실속 인지·회복과 자세 이탈 예방입니다."},
      {en:"Thus, what seems like magic is a measured outcome of physics and discipline.", ko:"결국 마법처럼 보이는 비행은 물리와 규율이 만든 결과입니다."},
      {en:"In short: shape the air, push ahead, keep angles honest, and balance the forces.", ko:"요컨대 공기를 다루고, 전진하며, 각도를 관리하고, 힘의 균형을 맞추는 일입니다."}
    ],
    vocab: [
      ["downwash","다운워시","Downwash is the downward deflection of airflow behind the wing."],
      ["flow separation","유동 박리","Separation causes stall and extra drag."],
      ["fly-by-wire","플라이바이와이어","Computers assist stability and control."]
    ],
    quiz: [
      {q:"Which law explains upward push when air is deflected downward?", options:["Newton’s third law","Ohm’s law","Snell’s law"], answer:0},
      {tf:true, stmt:"Lower air density at altitude requires higher true airspeed for the same lift.", answer:true},
      {q:"Which devices are ‘high-lift’ systems?", options:["Flaps and slats","Spoilers and brakes","Ailerons only"], answer:0}
    ],
    grammar: [
      {
        en:"Because the wing deflects air downward, the air pushes the wing upward.",
        ko:"날개가 공기를 아래로 편향시키기 때문에, 공기는 날개를 위로 밀어 올린다.",
        point:"이유 부사절 because",
        q:"(___) the wing deflects air downward, the air pushes the wing upward.",
        options:["Because","Although","Unless"],
        answer:0
      },
      {
        en:"Had the pilot increased the angle further, the wing would have stalled.",
        ko:"조종사가 각도를 더 키웠다면 날개는 실속에 빠졌을 것이다.",
        point:"가정법 과거완료 도치",
        q:"(___) the pilot increased the angle further, the wing (___) have stalled.",
        options:["Had / would","If / must","Were / will"],
        answer:0
      },
      {
        en:"Maintaining balance is as important as generating lift.",
        ko:"균형을 유지하는 일은 양력을 만드는 것 만큼이나 중요하다.",
        point:"비교 구문: as ~ as",
        q:"Maintaining balance is (___) important (___) generating lift.",
        options:["as / as","so / as","more / than"],
        answer:0
      }
    ]
  }
};

/* =========================
   공통 DOM 참조
   ========================= */
const levelTabs = {
  low: document.getElementById('tab-low'),
  high: document.getElementById('tab-high'),
  mid: document.getElementById('tab-mid'),
  hs: document.getElementById('tab-hs')
};
const voiceSelect = document.getElementById('voiceSelect');
const rateRange = document.getElementById('rate');
const rateLabel = document.getElementById('rateLabel');
const sentencesEl = document.getElementById('sentences');
const quizList = document.getElementById('quizList');
const vocabEl = document.getElementById('vocab');
const topicPill = document.getElementById('topicPill');
const cefrPill = document.getElementById('cefrPill');
const headlineEl = document.getElementById('headline');
const dekEl = document.getElementById('dek');
const grammarBox = document.getElementById('grammarBox');
const grammarList = document.getElementById('grammarList');
const grammarTitle = document.getElementById('grammarTitle');

const playAllBtn = document.getElementById('playAll');
const pauseBtn = document.getElementById('pauseBtn');
const resumeBtn = document.getElementById('resumeBtn');
const stopBtn = document.getElementById('stopBtn');

const toggleAllKoBtn = document.getElementById('toggleAllKoBtn');
let hideAllKo = false;

let LEVEL = 'mid';
let VOICES = [];
let CURRENT_INDEX = -1;
let PLAYING_ALL = false;

/* =========================
   음성 목록 로딩
   ========================= */
function loadVoices(){
  VOICES = speechSynthesis.getVoices().filter(v => v.lang && v.lang.startsWith('en'));
  voiceSelect.innerHTML = '';
  VOICES.forEach((v,i)=>{
    const opt=document.createElement('option');
    opt.value=i; opt.textContent=`${v.name} (${v.lang})`+(v.default?' • default':'');
    voiceSelect.appendChild(opt);
  });
  const preferred = VOICES.findIndex(v=>/en-US/i.test(v.lang)&&/Female|Jenny|Aria|Salli|female/i.test(v.name));
  voiceSelect.value = String(preferred>=0?preferred:0);
}
speechSynthesis.onvoiceschanged = loadVoices;
if (speechSynthesis.getVoices().length) loadVoices();

/* =========================
   속도 프리셋/표시
   ========================= */
document.querySelectorAll('.preset').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const r=parseFloat(btn.dataset.rate);
    rateRange.value=r; rateLabel.textContent=r.toFixed(2)+'×';
  });
});
rateRange.addEventListener('input',()=> rateLabel.textContent=parseFloat(rateRange.value).toFixed(2)+'×');

/* =========================
   레벨 전환
   ========================= */
levelTabs.low.addEventListener('click',()=>switchLevel('low'));
levelTabs.high.addEventListener('click',()=>switchLevel('high'));
levelTabs.mid.addEventListener('click',()=>switchLevel('mid'));
levelTabs.hs.addEventListener('click',()=>switchLevel('hs'));

/* =========================
   재생 컨트롤
   ========================= */
playAllBtn.addEventListener('click',()=>startPlayAll());
pauseBtn.addEventListener('click',()=>speechSynthesis.pause());
resumeBtn.addEventListener('click',()=>speechSynthesis.resume());
stopBtn.addEventListener('click',stopAll);

/* =========================
   한국어 전체 토글
   ========================= */
toggleAllKoBtn.addEventListener('click', () => {
  hideAllKo = !hideAllKo;
  applyAllKoVisibility();
});
function applyAllKoVisibility(){
  const kos = document.querySelectorAll('#sentences .ko');
  kos.forEach(el => { hideAllKo ? el.classList.add('hidden') : el.classList.remove('hidden'); });
  toggleAllKoBtn.textContent = hideAllKo ? '한국어 보이기' : '한국어 가리기';
}

/* =========================
   레벨 렌더링
   ========================= */
function switchLevel(lv){
  LEVEL=lv;
  for(const k of Object.keys(levelTabs)){
    levelTabs[k].setAttribute('aria-selected',k===lv?'true':'false');
  }
  const d=DATA[lv];
  topicPill.textContent=d.topic;
  cefrPill.textContent=d.cefr;
  headlineEl.textContent=d.headline;
  dekEl.textContent=d.dek;

  // 문장 렌더 (영/한)
  sentencesEl.innerHTML='';
  d.sents.forEach((o,i)=>{
    const div=document.createElement('div');
    div.className='sent'; div.dataset.idx=i;
    div.innerHTML = `<span class="en">${o.en}</span><span class="ko">${o.ko}</span>`;
    div.addEventListener('click',()=>playSentence(i,true));
    sentencesEl.appendChild(div);
  });

  // 단어장
  vocabEl.innerHTML='';
  (d.vocab||[]).forEach(([en,ko,ex])=>{
    const li=document.createElement('li');
    li.innerHTML=`<b>${en}</b> — ${ko}<br><span class="small">${ex}</span>`;
    vocabEl.appendChild(li);
  });

  // 퀴즈
  quizList.innerHTML='';
  (d.quiz||[]).forEach((q,i)=>{
    const li=document.createElement('li');
    if(q.tf){
      li.innerHTML=`<div>${q.stmt}</div>
      <div class="controls">
        <button data-q="${i}" data-a="true">True</button>
        <button data-q="${i}" data-a="false">False</button>
        <span class="small" id="qfb-${i}"></span>
      </div>`;
    }else{
      const opts=q.options.map((o,oi)=>`<button data-q="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML=`<div>${q.q}</div><div class="controls">${opts}<span class="small" id="qfb-${i}"></span></div>`;
    }
    quizList.appendChild(li);
  });
  quizList.querySelectorAll('button').forEach(b=>{
    b.addEventListener('click',(e)=>{
      const qidx=parseInt(e.target.dataset.q,10);
      const ansRaw=e.target.dataset.a;
      const dataQ=DATA[LEVEL].quiz[qidx];
      const correct = dataQ.tf ? (String(dataQ.answer)===ansRaw) : (dataQ.answer===parseInt(ansRaw,10));
      document.getElementById('qfb-'+qidx).textContent = correct?'정답!':'다시 생각해봐요';
    });
  });

  // 문법(있을 때만 표시)
  if(d.grammar){
    grammarBox.style.display='';
    const titleMap = {
      low:"문법 포인트 (초등 저학년)",
      high:"문법 포인트 (초등 고학년)",
      mid:"문법 포인트 (중학생)",
      hs:"문법 포인트 (고등/수능)"
    };
    grammarTitle.textContent = titleMap[LEVEL] || "문법 포인트";
    grammarList.innerHTML='';
    d.grammar.forEach((g,i)=>{
      const li=document.createElement('li');
      const opts=g.options.map((o,oi)=>`<button data-g="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML = `<div><b>${g.en}</b><br><span class="small">${g.ko}</span><br><span class="small">포인트: ${g.point}</span></div>
                      <div class="controls"><span class="small">${g.q}</span></div>
                      <div class="controls">${opts}<span class="small" id="gfb-${i}"></span></div>`;
      grammarList.appendChild(li);
    });
    grammarList.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',(e)=>{
        const gidx=parseInt(e.target.dataset.g,10);
        const ans=parseInt(e.target.dataset.a,10);
        const cor=DATA[LEVEL].grammar[gidx].answer;
        document.getElementById('gfb-'+gidx).textContent=(ans===cor)?'정답!':'다시 시도해보세요';
      });
    });
  }else{
    grammarBox.style.display='none';
    grammarList.innerHTML='';
  }

  applyAllKoVisibility();
  stopAll();
}

// 초기 렌더: 중학생
switchLevel('mid');

/* =========================
   음성 합성 재생
   ========================= */
function getSelectedVoice(){
  const idx=parseInt(voiceSelect.value||'0',10);
  return VOICES[idx]||null;
}
function markActive(i){
  sentencesEl.querySelectorAll('.sent').forEach((el,j)=>{ el.classList.toggle('active',j===i); });
}
function clearMarks(){ sentencesEl.querySelectorAll('.sent').forEach(el=>el.classList.remove('active')); }
function stopAll(){ PLAYING_ALL=false; CURRENT_INDEX=-1; speechSynthesis.cancel(); clearMarks(); }

function playSentence(i,repeat=false){
  stopAll();
  const d=DATA[LEVEL]; const text=d.sents[i].en;
  CURRENT_INDEX=i; markActive(i);
  const u=new SpeechSynthesisUtterance(text);
  const v=getSelectedVoice(); if(v) u.voice=v;
  u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
  u.onend=()=>{ if(repeat){ setTimeout(()=>playSentence(i,true),250);} else { CURRENT_INDEX=-1; clearMarks(); } };
  speechSynthesis.speak(u);
}

function startPlayAll(){
  stopAll(); PLAYING_ALL=true;
  const d=DATA[LEVEL]; let i=0;
  const next=()=>{
    if(!PLAYING_ALL) return;
    if(i>=d.sents.length){ stopAll(); return; }
    CURRENT_INDEX=i; markActive(i);
    const u=new SpeechSynthesisUtterance(d.sents[i].en);
    const v=getSelectedVoice(); if(v) u.voice=v;
    u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
    u.onend=()=>{ setTimeout(()=>{ i++; next(); }, 250); };
    speechSynthesis.speak(u);
  };
  next();
}

/* =========================
   키보드 단축키
   ========================= */
window.addEventListener('keydown',(e)=>{
  if(e.code==='Space'){
    e.preventDefault();
    if(speechSynthesis.speaking && !speechSynthesis.paused) speechSynthesis.pause();
    else speechSynthesis.resume();
  }
  if(e.code==='Digit1'){ switchLevel('low'); }
  if(e.code==='Digit2'){ switchLevel('high'); }
  if(e.code==='Digit3'){ switchLevel('mid'); }
  if(e.code==='Digit4'){ switchLevel('hs'); }
});
</script>
</body>
</html>
