<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[Science] Antarctic Glacier Microbes May Infect Humans | EduPod 뉴스</title>
  <meta name="category" content="Science, Climate, Health" />
  <meta name="description" content="국내 연구팀이 남극 빙하에서 확보한 미생물 가운데 일부가 인체 감염 가능성을 보였다는 분석을 바탕으로, 빙하 미생물과 기후변화의 연결 고리를 학생 눈높이에 맞춰 설명합니다." />
  <link rel="icon" href="/favicon.ico" />
  <link rel="canonical" href="https://www.edupod.kr/news/2025-09-06-antarctic-microbes-human-risk.html" />
  <style>
    :root{
      --border:#e5e7eb;--muted:#6b7280;--accent:#eef2ff;--active:#fff4cc;
      --primary:#111827;--bg:#fafafa;--cta:#4f46e5;--cta-600:#4338ca;--cta-bg:#eef2ff;
      --note:#0ea5e9;--note-bg:#ecfeff;
      --danger:#ef4444;--danger-bg:#fff5f5;
    }
    html,body{margin:0;padding:0;background:var(--bg)}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;color:var(--primary)}
    header{padding:12px 16px;background:#fff;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:12px}
    h1{font-size:18px;margin:0;flex:1}
    .nav{display:flex;gap:8px}
    .nav a{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:#fff;text-decoration:none;font-size:13px;color:var(--primary)}
    .nav a:hover{background:#f8fafc}
    main{padding:20px;max-width:980px;margin:0 auto}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:16px;flex:1 1 360px;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .meta{font-size:12px;color:var(--muted)}
    .pill{font-size:12px;border:1px solid var(--border);padding:2px 8px;border-radius:999px;background:#fff}
    .headline{font-weight:700}
    .small{font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
    select,button,input[type="range"]{border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:#fff;cursor:pointer}
    button.primary{background:var(--cta-bg);border-color:var(--cta);color:var(--cta)}
    button.primary:hover{background:#e6e9ff;border-color:var(--cta-600);color:var(--cta-600)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .level-tabs{display:flex;gap:8px;margin:8px 0 12px;flex-wrap:wrap}
    .level-tabs button{padding:6px 10px}
    .level-tabs button[aria-selected="true"]{background:#111827;color:#fff;border-color:#111827}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){ .grid{grid-template-columns:1.2fr .8fr} }
    .sent{padding:8px 10px;border-radius:8px;margin:6px 0;border:1px dashed transparent}
    .sent:hover{background:#f8fafc}
    .sent.active{background:var(--active);border-color:#fcd34d}
    .en{display:block}
    .ko{display:block;color:#374151;font-size:13px;margin-top:4px}
    .ko.hidden{display:none !important;}
    .quiz{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .quiz h3{font-size:14px;margin:0 0 6px}
    .footer{font-size:12px;color:var(--muted);margin-top:16px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid var(--border);border-bottom-width:2px;padding:2px 6px;border-radius:6px;background:#fff}
    .grammar{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .iconbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0}
    .icon-btn{
      width:52px;height:52px;display:grid;place-items:center;
      border:2px solid var(--note);border-radius:14px;background:#fff;color:var(--note);
      box-shadow:0 1px 0 rgba(0,0,0,.03)
    }
    .icon-btn:hover{background:var(--note-bg)}
    .icon-btn:disabled{opacity:.5}
    .icon-btn svg{width:26px;height:26px;display:block}
    .icon-label{font-size:12px;color:var(--muted);margin-left:2px}
    .callout{background:var(--danger-bg);border:1px dashed var(--danger);border-radius:10px;padding:10px;margin-top:8px;font-size:12px}
  </style>
     <!-- Microsoft Clarity -->
<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "svtn5vtbri");
</script> 
</head>
<body>
<header>
  <h1>EduPod 뉴스
    <span class="meta">— 2025-09-06 ·
      <span class="pill">Science</span>
      <span class="pill">Climate</span>
      <span class="pill">Health</span>
    </span>
  </h1>
  <nav class="nav" aria-label="주요 이동">
    <a href="/" id="homeLink" title="홈으로">홈으로</a>
    <a href="/news.html/" id="newsListLink" title="뉴스 리스트">뉴스 리스트</a>
  </nav>
</header>

<main>
  <div class="row">
    <div class="card" style="flex:1 1 100%">
      <div class="level-tabs" role="tablist">
        <button role="tab" id="tab-low" aria-selected="false">초등 저학년 (A1–A2)</button>
        <button role="tab" id="tab-high" aria-selected="false">초등 고학년 (A2–B1)</button>
        <button role="tab" id="tab-mid" aria-selected="true">중학생 (A2–B1)</button>
        <button role="tab" id="tab-hs" aria-selected="false">고등/수능 (B2–C1)</button>
      </div>

      <!-- 재생 아이콘 버튼 -->
      <div class="iconbar" aria-label="재생 컨트롤">
        <button id="playAll" class="icon-btn" title="전체 재생" aria-label="전체 재생">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="pauseBtn" class="icon-btn" title="일시정지" aria-label="일시정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
        </button>
        <button id="resumeBtn" class="icon-btn" title="재개" aria-label="재개">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="stopBtn" class="icon-btn" title="정지" aria-label="정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 6h12v12H6z"/></svg>
        </button>
        <span class="icon-label">문장 클릭: 해당 문장만 반복</span>
      </div>

      <div class="controls">
        <label class="small" for="voiceSelect">음성:</label>
        <select id="voiceSelect" aria-label="Voice"></select>
        <span class="small">속도 프리셋:</span>
        <button class="preset" data-rate="0.9">처음 듣기</button>
        <button class="preset" data-rate="1.0">보통</button>
        <button class="preset" data-rate="1.15">빠르게</button>
        <span class="small">세부 속도</span>
        <input id="rate" type="range" min="0.7" max="1.4" step="0.05" value="1.0" />
        <span class="small" id="rateLabel">1.00×</span>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card" id="articleCard">
      <div class="meta"><span class="pill" id="topicPill">Science</span> <span class="pill" id="cefrPill">A2–B1</span></div>
      <div class="headline" id="headline">Antarctic Ice Microbes Show Potential to Infect Humans</div>
      <p class="small" id="dek">국내 연구팀이 남극 빙하 시료에서 확보한 미생물 중 일부가 인체 감염 관련 유전적·기능적 단서를 보였다는 분석. 빙하 해빙과 공중보건 감시의 중요성을 짚습니다.</p>

      <div class="callout">※ 교육용 요약: 실제 위험 평가는 추가 검증이 필요합니다. 야외 채집·실험은 항상 안전수칙과 보호장비, 허가 절차를 따르세요.</div>

      <!-- 한국어 전체 토글 -->
      <div class="controls" id="koToggleControls">
        <button id="toggleAllKoBtn" class="primary">한국어 가리기</button>
        <span class="small">각 레벨 지문의 한국어 해석을 전체 가립니다.</span>
      </div>

      <div id="sentences"></div>
      <div class="footer">문장을 클릭하면 해당 부분만 <span class="kbd">반복</span> 재생합니다. 전체 재생 중 <span class="kbd">일시정지/재개</span> 가능.</div>

      <div class="quiz">
        <h3>퀴즈</h3>
        <ol id="quizList"></ol>
      </div>

      <div class="grammar" id="grammarBox" style="display:none">
        <h3 id="grammarTitle" style="margin:0 0 6px">문법 포인트</h3>
        <ol id="grammarList"></ol>
      </div>
    </div>

    <div class="card">
      <h2 style="margin:0 0 6px">단어장</h2>
      <ul id="vocab"></ul>
      <p class="small">영어 문장 아래에 한국어 해석이 함께 제공됩니다.</p>
    </div>
  </div>
</main>

<script>
/* =========================
   레벨별 콘텐츠 데이터
   ========================= */
const DATA = {
  /* -------- 초등 저학년 (A1–A2) 14줄 -------- */
  low: {
    topic: "Science",
    cefr: "A1–A2",
    headline: "Tiny Life in Antarctic Ice",
    dek: "남극의 얼음 속 작은 생물들, 일부는 사람에게 위험할 수도 있어요.",
    sents: [
      {en:"Scientists took ice samples near a Korean base in Antarctica.", ko:"과학자들이 남극 한국 기지 근처에서 얼음 시료를 채취했어요."},
      {en:"They found many tiny living things called microbes.", ko:"미생물이라 부르는 아주 작은 생물을 많이 발견했어요."},
      {en:"Some microbes might infect humans.", ko:"그중 일부는 사람에게 감염될 수도 있어요."},
      {en:"A few could stick to our cells like bad germs do.", ko:"몇몇은 나쁜 세균처럼 우리 세포에 달라붙을 수도 있어요."},
      {en:"One type even broke red blood cells at warm body temperature.", ko:"어떤 종류는 사람 체온에서도 적혈구를 해칠 수 있었어요."},
      {en:"Not all microbes are dangerous.", ko:"모든 미생물이 위험한 것은 아니에요."},
      {en:"Scientists need more tests to be sure.", ko:"확실히 하려면 더 많은 검사가 필요해요."},
      {en:"As ice melts, old microbes can wake up.", ko:"얼음이 녹으면 오래된 미생물이 깨어날 수 있어요."},
      {en:"This is why climate change matters for health.", ko:"그래서 기후 변화가 건강과도 관련 있어요."},
      {en:"Wear safety gear in the lab.", ko:"실험실에서는 안전장비를 착용해요."},
      {en:"Follow rules when studying nature.", ko:"자연을 연구할 때는 규칙을 지켜요."},
      {en:"Science helps us prepare and stay safe.", ko:"과학은 우리가 준비하고 안전하게 지내는 데 도움을 줘요."},
      {en:"Tiny life can teach big lessons.", ko:"아주 작은 생물이 큰 교훈을 줄 수 있어요."},
      {en:"Keep learning with care and curiosity.", ko:"관심과 주의를 갖고 계속 배워요."}
    ],
    vocab: [
      ["microbe","미생물","Microbes are tiny living things."],
      ["infect","감염시키다","Some microbes can infect humans."],
      ["sample","시료/표본","Scientists study ice samples."]
    ],
    quiz: [
      {q:"Where were the samples taken?", options:["Antarctica","Desert","Space"], answer:0},
      {tf:true, stmt:"All microbes are dangerous to humans.", answer:false},
      {q:"Why is melting ice important?", options:["It may release microbes","It makes candy","It stops science"], answer:0}
    ]
  },

  /* -------- 초등 고학년 (A2–B1) 18줄 -------- */
  high: {
    topic: "Climate",
    cefr: "A2–B1",
    headline: "Hidden Microbes in Ice—and Why Warming Matters",
    dek: "남극 빙하에서 일부 미생물이 인체 감염 단서를 보였다는 분석과, 기후 변화가 주는 의미.",
    sents: [
      {en:"A Korean research team studied glacier ice near Jang Bogo Station.", ko:"한국 연구팀이 장보고기지 인근 빙하의 얼음을 조사했습니다."},
      {en:"They secured 656 microbial isolates across 27 types.", ko:"총 27종에서 656개의 미생물 균주를 확보했습니다."},
      {en:"Nine types (55 isolates) showed potential human infectivity.", ko:"이 가운데 9종(55균주)은 인체 감염 가능성을 보였습니다."},
      {en:"Some carried genes to attach to cells and evade immunity.", ko:"일부는 세포에 달라붙고 면역을 피하는 유전자를 지녔습니다."},
      {en:"One group damaged red blood cells at 37°C.", ko:"어떤 그룹은 37°C에서 적혈구를 손상시켰습니다."},
      {en:"This does not mean an outbreak—it signals a need for careful tests.", ko:"이는 곧바로 유행을 뜻하지 않고, 신중한 검증 필요성을 시사합니다."},
      {en:"As glaciers melt, long-frozen microbes may re-emerge.", ko:"빙하가 녹으면 오래 얼어 있던 미생물이 다시 나타날 수 있습니다."},
      {en:"Public health monitoring becomes more important.", ko:"공중보건 감시는 더욱 중요해집니다."},
      {en:"Field work and labs must follow strict biosafety rules.", ko:"야외 조사와 실험실은 엄격한 생물안전 수칙을 지켜야 합니다."},
      {en:"Most microbes are harmless or even helpful.", ko:"대부분의 미생물은 해롭지 않거나 도움이 됩니다."},
      {en:"Scientists sort risks using genetics and experiments.", ko:"과학자들은 유전·실험으로 위험도를 구분합니다."},
      {en:"Climate change links environment and health.", ko:"기후 변화는 환경과 건강을 연결합니다."},
      {en:"Learning now helps us respond later.", ko:"지금 배우는 것이 나중 대응에 도움이 됩니다."},
      {en:"Stay curious, but stay safe.", ko:"호기심은 좋지만 안전이 우선입니다."},
      {en:"That is responsible science.", ko:"그것이 책임 있는 과학입니다."},
      {en:"Small organisms can shape big systems.", ko:"작은 생물이 큰 체계를 바꾸기도 합니다."},
      {en:"Science turns surprises into knowledge.", ko:"과학은 놀라움을 지식으로 바꿉니다."},
      {en:"Knowledge guides smart action.", ko:"지식은 현명한 행동을 이끕니다."}
    ],
    vocab: [
      ["isolate","분리 균주","An isolate is a microbe grown from a sample."],
      ["immunity","면역","Some microbes can evade immunity."],
      ["biosafety","생물안전","Biosafety rules keep people safe."]
    ],
    quiz: [
      {q:"What did some genes suggest?", options:["Cell attachment & immune evasion","Photosynthesis","Metal melting"], answer:0},
      {tf:true, stmt:"Melting glaciers can release long-frozen microbes.", answer:true},
      {q:"Why follow biosafety rules?", options:["To reduce risk","To speed games","To skip tests"], answer:0}
    ]
  },

  /* -------- 중학생 (A2–B1) 22줄 -------- */
  mid: {
    topic: "Health",
    cefr: "A2–B1",
    headline: "Antarctic Ice Microbiome: Signals of Possible Human Infection",
    dek: "유전·기능 단서가 포착됐지만, 실제 위험 평가는 지속적 검증과 감시가 핵심.",
    sents: [
      {en:"Researchers analyzed glacier samples near Korea’s Jang Bogo Station.", ko:"연구진은 한국 장보고기지 인근의 빙하 시료를 분석했습니다."},
      {en:"They reported 27 taxa and 656 isolates in total.", ko:"총 27개 분류군, 656개 균주가 보고되었습니다."},
      {en:"Nine taxa (55 isolates) raised flags for human infectivity.", ko:"9개 분류군(55균주)은 인체 감염 가능성 신호를 보였습니다."},
      {en:"Genetic markers suggested adhesion and immune evasion.", ko:"유전 표지가 부착·면역 회피 가능성을 시사했습니다."},
      {en:"Some isolates lysed red blood cells at 37°C.", ko:"일부 균주는 37°C에서 적혈구 용혈을 일으켰습니다."},
      {en:"Such findings are preliminary, not proof of disease.", ko:"이런 발견은 예비 신호일 뿐 질병의 증거는 아닙니다."},
      {en:"Confirmation requires controlled tests and risk assessment.", ko:"확증에는 통제 실험과 위험 평가가 필요합니다."},
      {en:"Climate change accelerates glacier melt and microbial release.", ko:"기후 변화는 빙하 해빙과 미생물 방출을 가속화합니다."},
      {en:"Surveillance and biosafety protocols help reduce risk.", ko:"감시와 생물안전 절차가 위험을 낮춥니다."},
      {en:"Most environmental microbes remain harmless to humans.", ko:"대부분의 환경 미생물은 사람에게 무해합니다."},
      {en:"Still, rare pathogens can emerge under new conditions.", ko:"다만 새로운 조건에서 드물게 병원체가 나타날 수 있습니다."},
      {en:"Teams should use PPE and authorized facilities.", ko:"연구팀은 보호구를 착용하고 승인 시설을 사용해야 합니다."},
      {en:"Public communication must be clear: caution, not panic.", ko:"대중 소통은 ‘경계하되 과도한 공포는 금물’이어야 합니다."},
      {en:"Interdisciplinary work joins microbiology and climate science.", ko:"미생물학과 기후과학의 융합 연구가 필요합니다."},
      {en:"Data sharing speeds verification across labs.", ko:"데이터 공유는 검증 속도를 높입니다."},
      {en:"Education builds literacy against misinformation.", ko:"교육은 허위정보에 맞서는 역량을 키웁니다."},
      {en:"Preparedness plans should include cold-region hazards.", ko:"대비 계획에는 한랭권역 위험도 포함해야 합니다."},
      {en:"Local health systems can practice tabletop drills.", ko:"지역 보건체계는 모의훈련으로 대비할 수 있습니다."},
      {en:"Early signals matter when stakes are global.", ko:"지구적 사안에서는 초기 신호가 중요합니다."},
      {en:"Science turns signals into decisions.", ko:"과학은 신호를 결정으로 바꿉니다."},
      {en:"That is how we protect people and nature together.", ko:"그렇게 우리는 사람과 자연을 함께 지킵니다."},
      {en:"Stay curious—stay careful.", ko:"호기심을 잃지 말되, 조심하세요."}
    ],
    vocab: [
      ["hemolysis","용혈","Hemolysis means breaking red blood cells."],
      ["surveillance","감시/모니터링","Surveillance tracks early warning signs."],
      ["PPE","개인보호구","Gloves and masks are common PPE."]
    ],
    quiz: [
      {q:"What do adhesion genes suggest?", options:["Ability to stick to cells","Ability to fly","Ability to glow"], answer:0},
      {tf:true, stmt:"Preliminary lab signals are not the same as outbreaks.", answer:true},
      {q:"Why link climate and health?", options:["Melting can release microbes","It is trendy","It sells phones"], answer:0}
    ],
    grammar: [
      {
        en:"If glaciers keep melting, more microbes may be released.",
        ko:"빙하가 계속 녹는다면 더 많은 미생물이 방출될 수 있다.",
        point:"조건문 If + 현재, may + 동사원형",
        q:"If glaciers (___) melting, more microbes (___) released.",
        options:["keep / may be","kept / must be","keeps / should"],
        answer:0
      },
      {
        en:"These findings are preliminary rather than definitive.",
        ko:"이 발견은 결정적이라기보다 예비적이다.",
        point:"rather than 대조 구문",
        q:"These findings are (___) than (___).",
        options:["preliminary / definitive","defined / defining","definitive / preliminary"],
        answer:0
      }
    ]
  },

  /* -------- 고등/수능 (B2–C1) 26줄 -------- */
  hs: {
    topic: "Science",
    cefr: "B2–C1",
    headline: "Glacial Microbes and Human Risk: Signals, Not Certainties",
    dek: "남극 빙하 미생물의 인체 감염 신호와 기후·보건 교차점—증거의 수준과 대비 과제를 구분한다.",
    sents: [
      {en:"From Antarctic glacier cores, researchers recovered 656 isolates across 27 taxa.", ko:"남극 빙하 코어에서 연구진은 27개 분류군, 656개 균주를 확보했습니다."},
      {en:"Nine taxa (55 isolates) exhibited markers of potential human infectivity.", ko:"9개 분류군(55균주)이 인체 감염 가능성 표지를 보였습니다."},
      {en:"Genomic features included adhesion and immune-evasion candidates.", ko:"게놈 특성에는 부착·면역회피 후보가 포함되었습니다."},
      {en:"Phenotypically, some isolates caused hemolysis at 37°C.", ko:"표현형으로 일부 균주는 37°C에서 용혈을 일으켰습니다."},
      {en:"These constitute risk signals, not outbreak evidence.", ko:"이는 위험 신호이지, 유행의 증거는 아닙니다."},
      {en:"Translating signals into risk requires dose, host range, and transmission studies.", ko:"신호를 위험으로 번역하려면 용량·숙주 범위·전파성 연구가 필요합니다."},
      {en:"Warming accelerates deglaciation, increasing microbial release opportunities.", ko:"지구 온난화는 빙하 해빙을 가속해 미생물 방출 기회를 늘립니다."},
      {en:"Environmental release does not guarantee human infection.", ko:"환경 방출이 곧 인체 감염을 보장하진 않습니다."},
      {en:"Nevertheless, surveillance and biosafety tiers provide prudent safeguards.", ko:"그럼에도 감시와 단계별 생물안전은 신중한 안전장치입니다."},
      {en:"Field protocols: permits, sterile technique, cold-chain, and PPE.", ko:"현장 수칙: 허가, 멸균 절차, 콜드체인, 보호구."},
      {en:"Lab protocols: BSL compliance, containment, and clear data sharing.", ko:"실험 수칙: BSL 준수, 밀폐, 명확한 데이터 공유."},
      {en:"Communication should avoid alarmism while enabling action.", ko:"소통은 공포 조장을 피하면서도 행동을 가능하게 해야 합니다."},
      {en:"Interdisciplinary teams can model spillover under future climate scenarios.", ko:"융합팀은 미래 기후 시나리오에서의 전이 가능성을 모델링할 수 있습니다."},
      {en:"Equity matters: cold-region risks and global health capacity are uneven.", ko:"형평성 문제: 한랭권역 위험과 보건 역량은 불균등합니다."},
      {en:"Education builds literacy against rumor-driven panic.", ko:"교육은 소문이 부른 공포에 맞서는 소양을 키웁니다."},
      {en:"Preparedness turns early signals into timely mitigation.", ko:"대비는 초기 신호를 적시 완화로 바꿉니다."}
    ],
    vocab: [
      ["phenotype","표현형","Observed traits like hemolysis at 37°C."],
      ["spillover","전이/종간감염","Spillover is cross-species transmission."],
      ["containment","격리/밀폐","Containment prevents lab escape."]
    ],
    quiz: [
      {q:"What do the findings represent now?", options:["Risk signals","Confirmed outbreak","No data"], answer:0},
      {tf:true, stmt:"Warming can increase opportunities for microbial release from ice.", answer:true},
      {q:"Which study is needed for real risk?", options:["Dose and transmission","Shoe size","Color test"], answer:0}
    ],
    grammar: [
      {
        en:"Had the team confirmed transmission, the risk level would be higher.",
        ko:"전파가 확인되었다면 위험 수준은 더 높았을 것이다.",
        point:"가정법 과거완료 도치",
        q:"(___) the team confirmed transmission, the risk (___) be higher.",
        options:["Had / would","If / must","Were / will"],
        answer:0
      },
      {
        en:"Risk communication aims to inform rather than alarm.",
        ko:"위험 소통의 목적은 놀라게 하기보다 알리는 데 있다.",
        point:"rather than 대조",
        q:"to (___) rather than (___).",
        options:["inform / alarm","alarm / inform","ignore / inform"],
        answer:0
      }
    ]
  }
};

/* =========================
   공통 DOM 참조
   ========================= */
const levelTabs = {
  low: document.getElementById('tab-low'),
  high: document.getElementById('tab-high'),
  mid: document.getElementById('tab-mid'),
  hs: document.getElementById('tab-hs')
};
const voiceSelect = document.getElementById('voiceSelect');
const rateRange = document.getElementById('rate');
const rateLabel = document.getElementById('rateLabel');
const sentencesEl = document.getElementById('sentences');
const quizList = document.getElementById('quizList');
const vocabEl = document.getElementById('vocab');
const topicPill = document.getElementById('topicPill');
const cefrPill = document.getElementById('cefrPill');
const headlineEl = document.getElementById('headline');
const dekEl = document.getElementById('dek');
const grammarBox = document.getElementById('grammarBox');
const grammarList = document.getElementById('grammarList');
const grammarTitle = document.getElementById('grammarTitle');

const playAllBtn = document.getElementById('playAll');
const pauseBtn = document.getElementById('pauseBtn');
const resumeBtn = document.getElementById('resumeBtn');
const stopBtn = document.getElementById('stopBtn');

const toggleAllKoBtn = document.getElementById('toggleAllKoBtn');
let hideAllKo = false;

let LEVEL = 'mid';
let VOICES = [];
let CURRENT_INDEX = -1;
let PLAYING_ALL = false;

/* =========================
   음성 목록 로딩
   ========================= */
function loadVoices(){
  VOICES = speechSynthesis.getVoices().filter(v => v.lang && v.lang.startsWith('en'));
  voiceSelect.innerHTML = '';
  VOICES.forEach((v,i)=>{
    const opt=document.createElement('option');
    opt.value=i; opt.textContent=`${v.name} (${v.lang})`+(v.default?' • default':'');
    voiceSelect.appendChild(opt);
  });
  const preferred = VOICES.findIndex(v=>/en-US/i.test(v.lang)&&/Female|Jenny|Aria|Salli|female/i.test(v.name));
  voiceSelect.value = String(preferred>=0?preferred:0);
}
speechSynthesis.onvoiceschanged = loadVoices;
if (speechSynthesis.getVoices().length) loadVoices();

/* =========================
   속도 프리셋/표시
   ========================= */
document.querySelectorAll('.preset').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const r=parseFloat(btn.dataset.rate);
    rateRange.value=r; rateLabel.textContent=r.toFixed(2)+'×';
  });
});
rateRange.addEventListener('input',()=> rateLabel.textContent=parseFloat(rateRange.value).toFixed(2)+'×');

/* =========================
   레벨 전환
   ========================= */
levelTabs.low.addEventListener('click',()=>switchLevel('low'));
levelTabs.high.addEventListener('click',()=>switchLevel('high'));
levelTabs.mid.addEventListener('click',()=>switchLevel('mid'));
levelTabs.hs.addEventListener('click',()=>switchLevel('hs'));

/* =========================
   재생 컨트롤
   ========================= */
playAllBtn.addEventListener('click',()=>startPlayAll());
pauseBtn.addEventListener('click',()=>speechSynthesis.pause());
resumeBtn.addEventListener('click',()=>speechSynthesis.resume());
stopBtn.addEventListener('click',stopAll);

/* =========================
   한국어 전체 토글
   ========================= */
toggleAllKoBtn.addEventListener('click', () => {
  hideAllKo = !hideAllKo;
  applyAllKoVisibility();
});
function applyAllKoVisibility(){
  const kos = document.querySelectorAll('#sentences .ko');
  kos.forEach(el => { hideAllKo ? el.classList.add('hidden') : el.classList.remove('hidden'); });
  toggleAllKoBtn.textContent = hideAllKo ? '한국어 보이기' : '한국어 가리기';
}

/* =========================
   레벨 렌더링
   ========================= */
function switchLevel(lv){
  LEVEL=lv;
  for(const k of Object.keys(levelTabs)){
    levelTabs[k].setAttribute('aria-selected',k===lv?'true':'false');
  }
  const d=DATA[lv];
  topicPill.textContent=d.topic;
  cefrPill.textContent=d.cefr;
  headlineEl.textContent=d.headline;
  dekEl.textContent=d.dek;

  // 문장 렌더
  sentencesEl.innerHTML='';
  d.sents.forEach((o,i)=>{
    const div=document.createElement('div');
    div.className='sent'; div.dataset.idx=i;
    div.innerHTML = `<span class="en">${o.en}</span><span class="ko">${o.ko}</span>`;
    div.addEventListener('click',()=>playSentence(i,true));
    sentencesEl.appendChild(div);
  });

  // 단어장
  vocabEl.innerHTML='';
  (d.vocab||[]).forEach(([en,ko,ex])=>{
    const li=document.createElement('li');
    li.innerHTML=`<b>${en}</b> — ${ko}<br><span class="small">${ex}</span>`;
    vocabEl.appendChild(li);
  });

  // 퀴즈
  quizList.innerHTML='';
  (d.quiz||[]).forEach((q,i)=>{
    const li=document.createElement('li');
    if(q.tf){
      li.innerHTML=`<div>${q.stmt}</div>
      <div class="controls">
        <button data-q="${i}" data-a="true">True</button>
        <button data-q="${i}" data-a="false">False</button>
        <span class="small" id="qfb-${i}"></span>
      </div>`;
    }else{
      const opts=q.options.map((o,oi)=>`<button data-q="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML=`<div>${q.q}</div><div class="controls">${opts}<span class="small" id="qfb-${i}"></span></div>`;
    }
    quizList.appendChild(li);
  });
  quizList.querySelectorAll('button').forEach(b=>{
    b.addEventListener('click',(e)=>{
      const qidx=parseInt(e.target.dataset.q,10);
      const ansRaw=e.target.dataset.a;
      const dataQ=DATA[LEVEL].quiz[qidx];
      const correct = dataQ.tf ? (String(dataQ.answer)===ansRaw) : (dataQ.answer===parseInt(ansRaw,10));
      document.getElementById('qfb-'+qidx).textContent = correct?'정답!':'다시 생각해봐요';
    });
  });

  // 문법
  if(d.grammar){
    grammarBox.style.display='';
    const titleMap = {
      low:"문법 포인트 (초등 저학년)",
      high:"문법 포인트 (초등 고학년)",
      mid:"문법 포인트 (중학생)",
      hs:"문법 포인트 (고등/수능)"
    };
    grammarTitle.textContent = titleMap[LEVEL] || "문법 포인트";
    grammarList.innerHTML='';
    d.grammar.forEach((g,i)=>{
      const li=document.createElement('li');
      const opts=g.options.map((o,oi)=>`<button data-g="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML = `<div><b>${g.en}</b><br><span class="small">${g.ko}</span><br><span class="small">포인트: ${g.point}</span></div>
                      <div class="controls"><span class="small">${g.q}</span></div>
                      <div class="controls">${opts}<span class="small" id="gfb-${i}"></span></div>`;
      grammarList.appendChild(li);
    });
    grammarList.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',(e)=>{
        const gidx=parseInt(e.target.dataset.g,10);
        const ans=parseInt(e.target.dataset.a,10);
        const cor=DATA[LEVEL].grammar[gidx].answer;
        document.getElementById('gfb-'+gidx).textContent=(ans===cor)?'정답!':'다시 시도해보세요';
      });
    });
  }else{
    grammarBox.style.display='none';
    grammarList.innerHTML='';
  }

  applyAllKoVisibility();
  stopAll();
}

// 초기 레벨: 중학생
switchLevel('mid');

/* =========================
   음성 합성
   ========================= */
function getSelectedVoice(){
  const idx=parseInt(voiceSelect.value||'0',10);
  return VOICES[idx]||null;
}
function markActive(i){
  sentencesEl.querySelectorAll('.sent').forEach((el,j)=>{ el.classList.toggle('active',j===i); });
}
function clearMarks(){ sentencesEl.querySelectorAll('.sent').forEach(el=>el.classList.remove('active')); }
function stopAll(){ PLAYING_ALL=false; CURRENT_INDEX=-1; speechSynthesis.cancel(); clearMarks(); }

function playSentence(i,repeat=false){
  stopAll();
  const d=DATA[LEVEL]; const text=d.sents[i].en;
  CURRENT_INDEX=i; markActive(i);
  const u=new SpeechSynthesisUtterance(text);
  const v=getSelectedVoice(); if(v) u.voice=v;
  u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
  u.onend=()=>{ if(repeat){ setTimeout(()=>playSentence(i,true),250);} else { CURRENT_INDEX=-1; clearMarks(); } };
  speechSynthesis.speak(u);
}

function startPlayAll(){
  stopAll(); PLAYING_ALL=true;
  const d=DATA[LEVEL]; let i=0;
  const next=()=>{
    if(!PLAYING_ALL) return;
    if(i>=d.sents.length){ stopAll(); return; }
    CURRENT_INDEX=i; markActive(i);
    const u=new SpeechSynthesisUtterance(d.sents[i].en);
    const v=getSelectedVoice(); if(v) u.voice=v;
    u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
    u.onend=()=>{ setTimeout(()=>{ i++; next(); }, 220); };
    speechSynthesis.speak(u);
  };
  next();
}

/* =========================
   키보드 단축키
   ========================= */
window.addEventListener('keydown',(e)=>{
  if(e.code==='Space'){
    e.preventDefault();
    if(speechSynthesis.speaking && !speechSynthesis.paused) speechSynthesis.pause();
    else speechSynthesis.resume();
  }
  if(e.code==='Digit1'){ switchLevel('low'); }
  if(e.code==='Digit2'){ switchLevel('high'); }
  if(e.code==='Digit3'){ switchLevel('mid'); }
  if(e.code==='Digit4'){ switchLevel('hs'); }
});
</script>
</body>
</html>
