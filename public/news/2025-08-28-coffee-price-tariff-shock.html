<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>[Price&] Tariff “Roasting” Sends Coffee Beans +30% in a Month — Will Cups Cost More? | EduPod 뉴스</title>
  <meta name="category" content="Economy, Business, Trade, Climate" />
  <meta name="description" content="미국의 對브라질 50% 관세와 브라질 냉해가 원두 가격을 급등시켰습니다. 아라비카·로부스타가 동반 상승하며 국내 커피값 추가 인상 가능성이 제기됩니다." />
  <link rel="icon" href="/favicon.ico" />
  <link rel="canonical" href="https://www.edupod.kr/news/2025-08-28-coffee-price-tariff-shock.html" />
  <style>
    :root{
      --border:#e5e7eb;--muted:#6b7280;--accent:#eef2ff;--active:#fff4cc;
      --primary:#111827;--bg:#fafafa;--cta:#4f46e5;--cta-600:#4338ca;--cta-bg:#eef2ff;
      --warn:#ef4444;--warn-600:#dc2626;--warn-bg:#fff5f5;
    }
    html,body{margin:0;padding:0;background:var(--bg)}
    body{font-family:system-ui,-apple-system,Segoe UI,Roboto,'Noto Sans KR',sans-serif;color:var(--primary)}
    header{padding:12px 16px;background:#fff;border-bottom:1px solid var(--border);position:sticky;top:0;z-index:10;display:flex;align-items:center;gap:12px}
    h1{font-size:18px;margin:0;flex:1}
    .nav{display:flex;gap:8px}
    .nav a{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);border-radius:999px;padding:6px 10px;background:#fff;text-decoration:none;font-size:13px;color:var(--primary)}
    .nav a:hover{background:#f8fafc}
    main{padding:20px;max-width:980px;margin:0 auto}
    .row{display:flex;gap:16px;flex-wrap:wrap}
    .card{background:#fff;border:1px solid var(--border);border-radius:12px;padding:16px;flex:1 1 360px;box-shadow:0 1px 0 rgba(0,0,0,.02)}
    .meta{font-size:12px;color:var(--muted)}
    .pill{font-size:12px;border:1px solid var(--border);padding:2px 8px;border-radius:999px;background:#fff}
    .headline{font-weight:700}
    .small{font-size:12px;color:var(--muted)}
    .controls{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin:8px 0}
    select,button,input[type="range"]{border:1px solid var(--border);border-radius:10px;padding:8px 10px;background:#fff;cursor:pointer}
    button.primary{background:var(--cta-bg);border-color:var(--cta);color:var(--cta)}
    button.primary:hover{background:#e6e9ff;border-color:var(--cta-600);color:var(--cta-600)}
    button:disabled{opacity:.5;cursor:not-allowed}
    .level-tabs{display:flex;gap:8px;margin:8px 0 12px;flex-wrap:wrap}
    .level-tabs button{padding:6px 10px}
    .level-tabs button[aria-selected="true"]{background:#111827;color:#fff;border-color:#111827}
    .grid{display:grid;grid-template-columns:1fr;gap:16px}
    @media(min-width:900px){ .grid{grid-template-columns:1.2fr .8fr} }
    .sent{padding:8px 10px;border-radius:8px;margin:6px 0;border:1px dashed transparent}
    .sent:hover{background:#f8fafc}
    .sent.active{background:var(--active);border-color:#fcd34d}
    .en{display:block}
    .ko{display:block;color:#374151;font-size:13px;margin-top:4px}
    .ko.hidden{display:none !important;}
    .quiz{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .quiz h3{font-size:14px;margin:0 0 6px}
    .footer{font-size:12px;color:var(--muted);margin-top:16px}
    .kbd{font-family:ui-monospace,SFMono-Regular,Menlo,monospace;border:1px solid var(--border);border-bottom-width:2px;padding:2px 6px;border-radius:6px;background:#fff}
    .grammar{border-top:1px dashed var(--border);margin-top:12px;padding-top:12px}
    .iconbar{display:flex;gap:10px;align-items:center;flex-wrap:wrap;margin:8px 0}
    .icon-btn{
      width:52px;height:52px;display:grid;place-items:center;
      border:2px solid var(--warn);border-radius:14px;background:#fff;color:var(--warn);
      box-shadow:0 1px 0 rgba(0,0,0,.03)
    }
    .icon-btn:hover{background:var(--warn-bg);border-color:var(--warn-600);color:var(--warn-600)}
    .icon-btn:disabled{opacity:.5}
    .icon-btn svg{width:26px;height:26px;display:block}
    .icon-label{font-size:12px;color:var(--muted);margin-left:2px}
  </style>
     <!-- Microsoft Clarity -->
<script type="text/javascript">
  (function(c,l,a,r,i,t,y){
      c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
      t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
      y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
  })(window, document, "clarity", "script", "svtn5vtbri");
</script> 
</head>
<body>
<header>
  <h1>EduPod 뉴스
    <span class="meta">— 2025-08-28 ·
      <span class="pill">Economy</span>
      <span class="pill">Business</span>
      <span class="pill">Trade</span>
    </span>
  </h1>
  <nav class="nav" aria-label="주요 이동">
    <a href="/" id="homeLink" title="홈으로">홈으로</a>
    <a href="/news.html/" id="newsListLink" title="뉴스 리스트">뉴스 리스트</a>
  </nav>
</header>

<main>
  <div class="row">
    <div class="card" style="flex:1 1 100%">
      <div class="level-tabs" role="tablist">
        <button role="tab" id="tab-low" aria-selected="false">초등 저학년 (A1–A2)</button>
        <button role="tab" id="tab-high" aria-selected="false">초등 고학년 (A2–B1)</button>
        <button role="tab" id="tab-mid" aria-selected="true">중학생 (A2–B1)</button>
        <button role="tab" id="tab-hs" aria-selected="false">고등/수능 (B2–C1)</button>
      </div>

      <!-- 재생 아이콘 버튼 -->
      <div class="iconbar" aria-label="재생 컨트롤">
        <button id="playAll" class="icon-btn" title="전체 재생" aria-label="전체 재생">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="pauseBtn" class="icon-btn" title="일시정지" aria-label="일시정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 5h4v14H6zM14 5h4v14h-4z"/></svg>
        </button>
        <button id="resumeBtn" class="icon-btn" title="재개" aria-label="재개">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M8 5v14l11-7z"/></svg>
        </button>
        <button id="stopBtn" class="icon-btn" title="정지" aria-label="정지">
          <svg viewBox="0 0 24 24" fill="currentColor" aria-hidden="true"><path d="M6 6h12v12H6z"/></svg>
        </button>
        <span class="icon-label">문장 클릭: 해당 문장만 반복</span>
      </div>

      <!-- 보이스/속도 컨트롤 -->
      <div class="controls">
        <label class="small" for="voiceSelect">음성:</label>
        <select id="voiceSelect" aria-label="Voice"></select>
        <span class="small">속도 프리셋:</span>
        <button class="preset" data-rate="0.85">처음 듣기</button>
        <button class="preset" data-rate="1.0">보통</button>
        <button class="preset" data-rate="1.15">빠르게</button>
        <span class="small">세부 속도</span>
        <input id="rate" type="range" min="0.7" max="1.4" step="0.05" value="1.0" />
        <span class="small" id="rateLabel">1.00×</span>
      </div>
    </div>
  </div>

  <div class="grid">
    <div class="card" id="articleCard">
      <div class="meta"><span class="pill" id="topicPill">Economy</span> <span class="pill" id="cefrPill">A2–B1</span></div>
      <div class="headline" id="headline">Tariff “Roasting” Pushes Coffee Beans Up ~30% — Will Prices Rise Again?</div>
      <p class="small" id="dek">Price&: Brazil shock rattles beans. A 50% U.S. tariff and Brazil’s cold snap hit Arabica & Robusta, while China opens doors—raising odds of pricier cups at home.</p>

      <!-- 한국어 전체 토글 -->
      <div class="controls" id="koToggleControls">
        <button id="toggleAllKoBtn" class="primary">한국어 가리기</button>
        <span class="small">각 레벨 지문의 한국어 해석을 전체 가립니다.</span>
      </div>

      <div id="sentences"></div>
      <div class="footer">문장을 클릭하면 해당 부분만 <span class="kbd">반복</span> 재생합니다. 전체 재생 중 <span class="kbd">일시정지/재개</span> 가능.</div>

      <div class="quiz">
        <h3>퀴즈</h3>
        <ol id="quizList"></ol>
      </div>

      <div class="grammar" id="grammarBox" style="display:none">
        <h3 id="grammarTitle" style="margin:0 0 6px">문법 포인트</h3>
        <ol id="grammarList"></ol>
      </div>
    </div>

    <div class="card">
      <h2 style="margin:0 0 6px">단어장</h2>
      <ul id="vocab"></ul>
      <p class="small">영어 문장 아래에 한국어 해석이 함께 제공됩니다.</p>
    </div>
  </div>
</main>

<script>
/* =========================
   레벨별 콘텐츠 데이터
   ========================= */
const DATA = {
  // 초등 저학년 (A1–A2) ~12줄
  low: {
    topic: "Economy",
    cefr: "A1–A2",
    headline: "Coffee Beans Get More Expensive",
    dek: "Tariffs and bad weather push prices up.",
    sents: [
      {en:"Coffee bean prices jumped this month.", ko:"이번 달 커피 원두 가격이 뛰었습니다."},
      {en:"The U.S. put a 50% tariff on Brazilian beans.", ko:"미국이 브라질산 원두에 50% 관세를 매겼습니다."},
      {en:"Brazil also had cold weather on coffee farms.", ko:"브라질 커피 농장이 냉해를 입었습니다."},
      {en:"Both made prices go up.", ko:"이 두 가지가 가격을 올렸습니다."},
      {en:"Arabica and Robusta are the two main beans.", ko:"아라비카와 로부스타가 대표 품종입니다."},
      {en:"In New York, Arabica got close to $4 per pound.", ko:"뉴욕에서 아라비카가 파운드당 4달러에 근접했습니다."},
      {en:"Robusta in London rose above $4,500 per ton.", ko:"런던의 로부스타는 톤당 4500달러를 넘었습니다."},
      {en:"China approved more Brazilian exporters.", ko:"중국은 더 많은 브라질 수출업체를 승인했습니다."},
      {en:"Korean coffee shops keep beans for 3–6 months.", ko:"국내 커피업체는 보통 3~6개월치 재고를 둡니다."},
      {en:"Higher costs may show up in Q4.", ko:"원가 상승은 4분기부터 반영될 수 있습니다."},
      {en:"Prices could rise again early next year.", ko:"내년 초 가격이 또 오를 수 있습니다."},
      {en:"Consumers worry about cup prices.", ko:"소비자들은 커피값을 걱정합니다."}
    ],
    vocab: [
      ["tariff","관세","A 50% tariff raises costs."],
      ["cold snap","한파/냉해","A cold snap hit Brazil."],
      ["inventory","재고","Shops keep 3–6 months of inventory."]
    ],
    quiz: [
      {q:"What tariff did the U.S. put on Brazilian beans?", options:["50%","5%","0%"], answer:0},
      {tf:true, stmt:"Cold weather can hurt coffee farms.", answer:true},
      {q:"When might higher costs reach stores?", options:["Q4","Q1","Never"], answer:0}
    ]
  },

  // 초등 고학년 (A2–B1) ~14줄
  high: {
    topic: "Business",
    cefr: "A2–B1",
    headline: "Tariffs + Weather = Pricier Beans",
    dek: "Arabica and Robusta leap as supply gets tighter.",
    sents: [
      {en:"Global coffee beans surged about 30% in a month.", ko:"전 세계 커피 원두 가격이 한 달 새 약 30% 급등했습니다."},
      {en:"The U.S. imposed a 50% tariff on Brazilian beans on Aug. 6.", ko:"미국은 8월 6일 브라질산 원두에 50% 관세를 부과했습니다."},
      {en:"Importers delayed purchases, cutting U.S. supply.", ko:"수입업체가 매입을 미루며 미국 내 공급이 줄었습니다."},
      {en:"A cold snap in Minas Gerais raised crop worries.", ko:"미나스제라이스주의 냉해가 작황 우려를 키웠습니다."},
      {en:"Arabica neared $4.00/lb in New York.", ko:"뉴욕에서 아라비카가 파운드당 4달러에 근접했습니다."},
      {en:"Robusta topped $4,500/ton in London.", ko:"런던에서 로부스타가 톤당 4500달러를 넘었습니다."},
      {en:"Speculators added fuel to the rally.", ko:"투기 세력이 랠리에 불을 지폈습니다."},
      {en:"Brazil’s green coffee exports in July fell ~28% y/y.", ko:"브라질의 7월 생두 수출은 전년 대비 약 28% 감소했습니다."},
      {en:"China approved 183 Brazilian exporters on July 30.", ko:"중국은 7월 30일 브라질 수출업체 183곳을 승인했습니다."},
      {en:"Korean chains keep 3–6 months of beans in stock.", ko:"국내 체인들은 3~6개월치 원두 재고를 보유합니다."},
      {en:"Pass-through could begin in Q4.", ko:"가격 전가는 4분기부터 시작될 수 있습니다."},
      {en:"Another cup-price hike is likely early next year.", ko:"내년 초 추가 인상이 유력합니다."},
      {en:"Coffee CPI rose ~15.9% y/y in July.", ko:"7월 커피 물가는 전년 대비 약 15.9% 올랐습니다."},
      {en:"Budget coffees and mixes may also get costlier.", ko:"저가 커피와 커피믹스도 비싸질 수 있습니다."}
    ],
    vocab: [
      ["pass-through","전가(가격 전가)","Cost pass-through hits retail prices."],
      ["speculator","투기 세력","Speculators can amplify moves."],
      ["y/y (year over year)","전년 대비","Exports fell y/y."]
    ],
    quiz: [
      {q:"Which two beans dominate world supply?", options:["Arabica & Robusta","Liberica & Excelsa","Cocoa & Tea"], answer:0},
      {tf:true, stmt:"Robusta traded above $4,500/ton.", answer:true},
      {q:"When did the U.S. tariff begin?", options:["Aug. 6","July 30","Sept. 1"], answer:0}
    ]
  },

  // 중학생 (A2–B1) 20~22줄
  mid: {
    topic: "Economy",
    cefr: "A2–B1",
    headline: "Coffee’s 1–2 Punch: Tariffs and Weather Tighten Supply",
    dek: "A 50% U.S. tariff and Brazil’s cold snap push Arabica & Robusta higher; Korea may see pricier cups by Q4.",
    sents: [
      {en:"Coffee markets jumped roughly 30% in a month as supply tightened.", ko:"공급이 타이트해지며 커피 시장은 한 달 새 약 30% 급등했습니다."},
      {en:"On Aug. 6, the U.S. slapped a 50% tariff on Brazilian beans.", ko:"8월 6일 미국이 브라질산 원두에 50% 관세를 부과했습니다."},
      {en:"Importers paused purchases, shrinking U.S. inventories.", ko:"수입업체가 매입을 멈추며 미국 내 재고가 줄었습니다."},
      {en:"In early August, a cold snap hit farms in Minas Gerais.", ko:"8월 초 미나스제라이스 농장이 냉해를 입었습니다."},
      {en:"That raised fears of lower production next season.", ko:"이에 다음 시즌 생산 감소 우려가 커졌습니다."},
      {en:"July green-coffee exports from Brazil fell ~28% y/y.", ko:"7월 브라질 생두 수출은 전년 대비 약 28% 감소했습니다."},
      {en:"Arabica neared $4.00 per pound in New York (around $3.85/lb).", ko:"뉴욕의 아라비카는 파운드당 4달러에 근접했습니다(약 $3.85)."},
      {en:"Robusta in London climbed above $4,500 per ton.", ko:"런던의 로부스타는 톤당 4500달러를 돌파했습니다."},
      {en:"With volatility high, speculators joined the rally.", ko:"변동성이 커지자 투기 세력이 가세했습니다."},
      {en:"China also entered the picture by approving 183 Brazilian exporters on July 30.", ko:"7월 30일 중국이 브라질 수출업체 183곳을 승인한 것도 변수입니다."},
      {en:"That could redirect Brazil’s sales from the U.S. to Asia over time.", ko:"이는 시간이 지나며 브라질 수출이 미국에서 아시아로 이동할 수 있음을 시사합니다."},
      {en:"In Korea, chains typically hold 3–6 months of beans.", ko:"국내에서는 보통 3~6개월치 원두 재고를 보유합니다."},
      {en:"So higher import costs may hit invoices from Q4.", ko:"따라서 수입 원가 상승은 4분기부터 전표에 반영될 수 있습니다."},
      {en:"Many brands raised prices earlier this year already.", ko:"국내 브랜드들은 이미 올해 초 가격을 올렸습니다."},
      {en:"Coffee CPI was up ~15.9% y/y in July.", ko:"7월 커피 소비자물가는 전년 대비 약 15.9% 상승했습니다."},
      {en:"If beans stay expensive, another price hike could come early next year.", ko:"원두가 비싸게 유지되면 내년 초 추가 인상이 올 수 있습니다."},
      {en:"Arabica + Robusta form the backbone of global supply.", ko:"아라비카와 로부스타는 글로벌 공급의 양대 축입니다."},
      {en:"Weather and policy now pressure both.", ko:"날씨와 정책이 동시에 두 품종을 압박하고 있습니다."},
      {en:"For consumers, that may mean pricier cups and mixes.", ko:"소비자에겐 한 잔과 믹스 가격 인상으로 나타날 수 있습니다."},
      {en:"For cafés, inventory planning becomes critical.", ko:"카페에겐 재고 운용이 더욱 중요해집니다."},
      {en:"For traders, volatility can cut both ways.", ko:"트레이더에겐 변동성이 양날의 검이 됩니다."}
    ],
    vocab: [
      ["pass-through","가격 전가","Firms may pass costs through in Q4."],
      ["inventory buffer","재고 완충","A 3–6 month buffer delays price hikes."],
      ["volatility","변동성","High volatility attracts speculators."]
    ],
    quiz: [
      {q:"Which two factors mainly drove the surge?", options:["Tariffs & cold snap","Tourism & fashion","Apps & AI"], answer:0},
      {tf:true, stmt:"Korean chains usually hold several months of beans.", answer:true},
      {q:"China’s approval of 183 exporters could lead to what?", options:["More Brazil-to-Asia sales","Lower quality beans","Instant price cuts"], answer:0}
    ],
    grammar: [
      {
        en:"As tariffs rose, importers delayed purchases.",
        ko:"관세가 오르자 수입업체는 매입을 늦췄다.",
        point:"시간·이유 연결: as",
        q:"(___) tariffs rose, importers delayed purchases.",
        options:["As","Unless","Although"],
        answer:0
      },
      {
        en:"If beans stay expensive, prices could rise again.",
        ko:"원두가 비싸게 유지되면 가격이 또 오를 수 있다.",
        point:"조건문: If + 현재, 조동사 + 동사원형",
        q:"If beans (___) expensive, prices (___) rise again.",
        options:["stay / could","stayed / must","stays / will"],
        answer:0
      }
    ]
  },

  // 고등/수능 (B2–C1) 28~32줄
  hs: {
    topic: "Trade",
    cefr: "B2–C1",
    headline: "Coffee’s Supply Squeeze: Policy Shock Meets Climate Risk",
    dek: "Arabica and Robusta rally as a 50% tariff collides with Brazil’s frost; Korea faces Q4 pass-through and early-’26 hikes.",
    sents: [
      {en:"A one–two punch hit coffee: a 50% U.S. tariff on Brazilian beans and a cold snap in Minas Gerais.", ko:"커피 시장을 강타한 1–2펀치: 브라질산 원두에 대한 미국의 50% 관세와 미나스제라이스의 냉해."},
      {en:"Together they tightened supply and jolted futures ~30% higher in a month.", ko:"이 둘은 공급을 죄고 선물을 한 달 새 약 30% 끌어올렸습니다."},
      {en:"Arabica in New York approached $4.00/lb (about $3.85), a sharp rebound from July lows.", ko:"뉴욕 아라비카는 파운드당 4달러에 근접(약 $3.85)하며 7월 저점에서 급반등했습니다."},
      {en:"Robusta in London cleared $4,500/ton, with spreads reflecting tightness.", ko:"런던 로부스타는 톤당 $4,500을 상회했고, 스프레드는 타이트함을 반영했습니다."},
      {en:"Speculative flows amplified the move as volatility spiked.", ko:"변동성이 치솟자 투기성 자금이 가격 움직임을 증폭시켰습니다."},
      {en:"Brazil’s July green-coffee exports fell roughly 28% y/y, underscoring supply risk.", ko:"7월 브라질 생두 수출은 전년 대비 약 28% 감소해 공급 리스크를 부각했습니다."},
      {en:"Policy realignment also loomed: on July 30, China approved 183 Brazilian exporters.", ko:"정책 재정렬도 감지됩니다. 7월 30일 중국이 브라질 수출업체 183곳을 승인했습니다."},
      {en:"Over time, this could diversify Brazil’s buyers away from the U.S., reshaping flows.", ko:"이는 시간이 지나며 브라질의 판로를 미국에서 다변화시켜 흐름을 바꿀 수 있습니다."},
      {en:"For U.S. importers, the tariff raised landed costs and prompted purchase delays.", ko:"미국 수입업체에는 관세가 도착 원가를 높여 매입 지연을 유발했습니다."},
      {en:"For Korea, the buffer is inventory: chains typically hold 3–6 months of beans.", ko:"한국에선 재고가 완충 역할을 합니다. 체인들은 보통 3~6개월치를 보유합니다."},
      {en:"Pass-through often begins as contracts roll—likely from Q4.", ko:"계약이 갱신될 때 전가가 시작되며, 4분기부터 나타날 공산이 큽니다."},
      {en:"The domestic coffee CPI already rose ~15.9% y/y in July.", ko:"국내 커피 물가는 7월에 이미 전년 대비 약 15.9% 상승했습니다."},
      {en:"Franchises raised menu prices earlier this year; another round may arrive early next year.", ko:"프랜차이즈는 올해 초 가격을 올렸고, 내년 초 추가 인상이 올 수 있습니다."},
      {en:"Arabica and Robusta—the industry’s twin pillars—now face synchronized shocks.", ko:"업계의 두 축인 아라비카와 로부스타는 동시 충격에 직면했습니다."},
      {en:"Climate adds chronic risk; policy adds acute cost.", ko:"기후는 만성적 리스크, 정책은 급성 비용을 추가합니다."},
      {en:"China’s approvals could gradually reroute Brazilian differentials toward Asia.", ko:"중국의 승인 조치는 브라질 디퍼런셜을 점진적으로 아시아로 재배치할 수 있습니다."},
      {en:"For cafés, the playbook is hedging and staggered procurement.", ko:"카페 업계의 해법은 헤지와 분할 매입입니다."},
      {en:"For consumers, value menus and mixes may narrow the shock—temporarily.", ko:"소비자에게는 가성비 메뉴와 믹스가 충격을 일시 완화할 수 있습니다."},
      {en:"Yet if beans stay elevated, retail prices will likely normalize higher.", ko:"그러나 원두가 고가로 유지되면 소매가는 더 높은 수준으로 정상화될 가능성이 큽니다."},
      {en:"Bottom line: policy shocks can fade, but climate volatility is sticking around.", ko:"요점: 정책 충격은 사그라져도 기후 변동성은 남습니다."},
      {en:"In a tight market, both can brew another bitter cup.", ko:"타이트한 시장에선 두 요소가 또 다른 ‘쓴 잔’을 만들 수 있습니다."}
    ],
    vocab: [
      ["landed cost","도착 원가","Tariffs lift landed costs."],
      ["differential","디퍼런셜(가격 차이)","Flows can shift differentials across regions."],
      ["staggered procurement","분할 매입","Firms use staggered procurement to manage risk."]
    ],
    quiz: [
      {q:"Which two shocks drove the rally?", options:["Tariffs & frost","Tourism & fashion","Apps & AI"], answer:0},
      {tf:true, stmt:"Inventory buffers can delay retail price hikes.", answer:true},
      {q:"China’s approval of 183 exporters most likely leads to:", options:["More Brazil-to-Asia shipments","Immediate U.S. price cuts","Lower farm yields"], answer:0}
    ],
    grammar: [
      {
        en:"Because landed costs surged, importers delayed purchases.",
        ko:"도착 원가가 급등했기 때문에 수입업체는 매입을 늦췄다.",
        point:"이유 접속사 because",
        q:"(___) landed costs surged, importers delayed purchases.",
        options:["Because","Although","Unless"],
        answer:0
      },
      {
        en:"If inventories thin out by Q4, cafés may raise prices again.",
        ko:"4분기에 재고가 얇아지면 카페는 가격을 또 올릴 수 있다.",
        point:"조건문",
        q:"If inventories (___) out by Q4, cafés (___) raise prices again.",
        options:["thin / may","thinned / must","thin / must"],
        answer:0
      },
      {
        en:"Tariffs are an acute shock, whereas climate risk is chronic.",
        ko:"관세는 급성 충격인 반면, 기후 리스크는 만성적이다.",
        point:"대조 연결사 whereas",
        q:"Tariffs are acute, (___) climate risk is chronic.",
        options:["whereas","because","unless"],
        answer:0
      }
    ]
  }
};

/* =========================
   공통 DOM 참조
   ========================= */
const levelTabs = {
  low: document.getElementById('tab-low'),
  high: document.getElementById('tab-high'),
  mid: document.getElementById('tab-mid'),
  hs: document.getElementById('tab-hs')
};
const voiceSelect = document.getElementById('voiceSelect');
const rateRange = document.getElementById('rate');
const rateLabel = document.getElementById('rateLabel');
const sentencesEl = document.getElementById('sentences');
const quizList = document.getElementById('quizList');
const vocabEl = document.getElementById('vocab');
const topicPill = document.getElementById('topicPill');
const cefrPill = document.getElementById('cefrPill');
const headlineEl = document.getElementById('headline');
const dekEl = document.getElementById('dek');
const grammarBox = document.getElementById('grammarBox');
const grammarList = document.getElementById('grammarList');
const grammarTitle = document.getElementById('grammarTitle');

const playAllBtn = document.getElementById('playAll');
const pauseBtn = document.getElementById('pauseBtn');
const resumeBtn = document.getElementById('resumeBtn');
const stopBtn = document.getElementById('stopBtn');

const toggleAllKoBtn = document.getElementById('toggleAllKoBtn');
let hideAllKo = false;

let LEVEL = 'mid';
let VOICES = [];
let CURRENT_INDEX = -1;
let PLAYING_ALL = false;

/* =========================
   음성 목록 로딩
   ========================= */
function loadVoices(){
  VOICES = speechSynthesis.getVoices().filter(v => v.lang && v.lang.startsWith('en'));
  voiceSelect.innerHTML = '';
  VOICES.forEach((v,i)=>{
    const opt=document.createElement('option');
    opt.value=i; opt.textContent=`${v.name} (${v.lang})`+(v.default?' • default':'');
    voiceSelect.appendChild(opt);
  });
  const preferred = VOICES.findIndex(v=>/en-US/i.test(v.lang)&&/Female|Jenny|Aria|Salli|female/i.test(v.name));
  voiceSelect.value = String(preferred>=0?preferred:0);
}
speechSynthesis.onvoiceschanged = loadVoices;
if (speechSynthesis.getVoices().length) loadVoices();

/* =========================
   속도 프리셋/표시
   ========================= */
document.querySelectorAll('.preset').forEach(btn=>{
  btn.addEventListener('click',()=>{
    const r=parseFloat(btn.dataset.rate);
    rateRange.value=r; rateLabel.textContent=r.toFixed(2)+'×';
  });
});
rateRange.addEventListener('input',()=> rateLabel.textContent=parseFloat(rateRange.value).toFixed(2)+'×');

/* =========================
   레벨 전환
   ========================= */
levelTabs.low.addEventListener('click',()=>switchLevel('low'));
levelTabs.high.addEventListener('click',()=>switchLevel('high'));
levelTabs.mid.addEventListener('click',()=>switchLevel('mid'));
levelTabs.hs.addEventListener('click',()=>switchLevel('hs'));

/* =========================
   재생 컨트롤
   ========================= */
playAllBtn.addEventListener('click',()=>startPlayAll());
pauseBtn.addEventListener('click',()=>speechSynthesis.pause());
resumeBtn.addEventListener('click',()=>speechSynthesis.resume());
stopBtn.addEventListener('click',stopAll);

/* =========================
   한국어 전체 토글
   ========================= */
toggleAllKoBtn.addEventListener('click', () => {
  hideAllKo = !hideAllKo;
  applyAllKoVisibility();
});
function applyAllKoVisibility(){
  const kos = document.querySelectorAll('#sentences .ko');
  kos.forEach(el => { hideAllKo ? el.classList.add('hidden') : el.classList.remove('hidden'); });
  toggleAllKoBtn.textContent = hideAllKo ? '한국어 보이기' : '한국어 가리기';
}

/* =========================
   레벨 렌더링
   ========================= */
function switchLevel(lv){
  LEVEL=lv;
  for(const k of Object.keys(levelTabs)){
    levelTabs[k].setAttribute('aria-selected',k===lv?'true':'false');
  }
  const d=DATA[lv];
  topicPill.textContent=d.topic;
  cefrPill.textContent=d.cefr;
  headlineEl.textContent=d.headline;
  dekEl.textContent=d.dek;

  // 문장 렌더 (영/한)
  sentencesEl.innerHTML='';
  d.sents.forEach((o,i)=>{
    const div=document.createElement('div');
    div.className='sent'; div.dataset.idx=i;
    div.innerHTML = `<span class="en">${o.en}</span><span class="ko">${o.ko}</span>`;
    div.addEventListener('click',()=>playSentence(i,true));
    sentencesEl.appendChild(div);
  });

  // 단어장
  vocabEl.innerHTML='';
  (d.vocab||[]).forEach(([en,ko,ex])=>{
    const li=document.createElement('li');
    li.innerHTML=`<b>${en}</b> — ${ko}<br><span class="small">${ex}</span>`;
    vocabEl.appendChild(li);
  });

  // 퀴즈
  quizList.innerHTML='';
  (d.quiz||[]).forEach((q,i)=>{
    const li=document.createElement('li');
    if(q.tf){
      li.innerHTML=`<div>${q.stmt}</div>
      <div class="controls">
        <button data-q="${i}" data-a="true">True</button>
        <button data-q="${i}" data-a="false">False</button>
        <span class="small" id="qfb-${i}"></span>
      </div>`;
    }else{
      const opts=q.options.map((o,oi)=>`<button data-q="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML=`<div>${q.q}</div><div class="controls">${opts}<span class="small" id="qfb-${i}"></span></div>`;
    }
    quizList.appendChild(li);
  });
  quizList.querySelectorAll('button').forEach(b=>{
    b.addEventListener('click',(e)=>{
      const qidx=parseInt(e.target.dataset.q,10);
      const ansRaw=e.target.dataset.a;
      const dataQ=DATA[LEVEL].quiz[qidx];
      const correct = dataQ.tf ? (String(dataQ.answer)===ansRaw) : (dataQ.answer===parseInt(ansRaw,10));
      document.getElementById('qfb-'+qidx).textContent = correct?'정답!':'다시 생각해봐요';
    });
  });

  // 문법(있을 때만 표시)
  if(d.grammar){
    grammarBox.style.display='';
    const titleMap = {
      low:"문법 포인트 (초등 저학년)",
      high:"문법 포인트 (초등 고학년)",
      mid:"문법 포인트 (중학생)",
      hs:"문법 포인트 (고등/수능)"
    };
    grammarTitle.textContent = titleMap[LEVEL] || "문법 포인트";
    grammarList.innerHTML='';
    d.grammar.forEach((g,i)=>{
      const li=document.createElement('li');
      const opts=g.options.map((o,oi)=>`<button data-g="${i}" data-a="${oi}">${o}</button>`).join(' ');
      li.innerHTML = `<div><b>${g.en}</b><br><span class="small">${g.ko}</span><br><span class="small">포인트: ${g.point}</span></div>
                      <div class="controls"><span class="small">${g.q}</span></div>
                      <div class="controls">${opts}<span class="small" id="gfb-${i}"></span></div>`;
      grammarList.appendChild(li);
    });
    grammarList.querySelectorAll('button').forEach(btn=>{
      btn.addEventListener('click',(e)=>{
        const gidx=parseInt(e.target.dataset.g,10);
        const ans=parseInt(e.target.dataset.a,10);
        const cor=DATA[LEVEL].grammar[gidx].answer;
        document.getElementById('gfb-'+gidx).textContent=(ans===cor)?'정답!':'다시 시도해보세요';
      });
    });
  }else{
    grammarBox.style.display='none';
    grammarList.innerHTML='';
  }

  applyAllKoVisibility();
  stopAll();
}

// 초기 렌더: 중학생
switchLevel('mid');

/* =========================
   음성 합성 재생
   ========================= */
function getSelectedVoice(){
  const idx=parseInt(voiceSelect.value||'0',10);
  return VOICES[idx]||null;
}
function markActive(i){
  sentencesEl.querySelectorAll('.sent').forEach((el,j)=>{ el.classList.toggle('active',j===i); });
}
function clearMarks(){ sentencesEl.querySelectorAll('.sent').forEach(el=>el.classList.remove('active')); }
function stopAll(){ PLAYING_ALL=false; CURRENT_INDEX=-1; speechSynthesis.cancel(); clearMarks(); }

function playSentence(i,repeat=false){
  stopAll();
  const d=DATA[LEVEL]; const text=d.sents[i].en;
  CURRENT_INDEX=i; markActive(i);
  const u=new SpeechSynthesisUtterance(text);
  const v=getSelectedVoice(); if(v) u.voice=v;
  u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
  u.onend=()=>{ if(repeat){ setTimeout(()=>playSentence(i,true),250);} else { CURRENT_INDEX=-1; clearMarks(); } };
  speechSynthesis.speak(u);
}

function startPlayAll(){
  stopAll(); PLAYING_ALL=true;
  const d=DATA[LEVEL]; let i=0;
  const next=()=>{
    if(!PLAYING_ALL) return;
    if(i>=d.sents.length){ stopAll(); return; }
    CURRENT_INDEX=i; markActive(i);
    const u=new SpeechSynthesisUtterance(d.sents[i].en);
    const v=getSelectedVoice(); if(v) u.voice=v;
    u.lang=(v&&v.lang)||'en-US'; u.rate=parseFloat(rateRange.value); u.pitch=1.0;
    u.onend=()=>{ setTimeout(()=>{ i++; next(); }, 250); };
    speechSynthesis.speak(u);
  };
  next();
}

/* =========================
   키보드 단축키
   ========================= */
window.addEventListener('keydown',(e)=>{
  if(e.code==='Space'){
    e.preventDefault();
    if(speechSynthesis.speaking && !speechSynthesis.paused) speechSynthesis.pause();
    else speechSynthesis.resume();
  }
  if(e.code==='Digit1'){ switchLevel('low'); }
  if(e.code==='Digit2'){ switchLevel('high'); }
  if(e.code==='Digit3'){ switchLevel('mid'); }
  if(e.code==='Digit4'){ switchLevel('hs'); }
});
</script>
</body>
</html>
